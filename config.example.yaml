# certd configuration
# Universal Let's Encrypt certificate daemon.

acme:
  # Email for Let's Encrypt account registration and expiry notifications.
  email: "admin@example.com"

  # Set to true to use the staging environment while testing your setup.
  # Staging certificates are not trusted by browsers or OS trust stores, but
  # requests are not subject to rate limits.
  staging: false

  # Shared ACME account storage — one account is used for all domains.
  account_storage_dir: "/var/lib/certd"

  # Address for the HTTP-01 challenge server.
  # Port 80 must be reachable from the internet on every managed domain.
  http_addr: ":80"

  # How often all certificates are checked for validity.
  check_interval: "12h"

domains:

  # IPSec / strongSwan VPN server
  # RSA2048 is required for Android native IKEv2/IPSec clients.
  - domain: "vpn.example.com"
    key_type: "RSA2048"
    cert_file: "/etc/ipsec.d/certs/vpn.cert.pem"
    ca_file:   "/etc/ipsec.d/cacerts/vpn.ca.pem"
    key_file:  "/etc/ipsec.d/private/vpn.key.pem"
    post_renew_hook: |
      ipsec rereadall
      ipsec reload
    hook_timeout: "30s"

  # nginx web server with a modern ECDSA key
  - domain: "www.example.com"
    key_type: "ECDSA"
    cert_file: "/etc/nginx/ssl/www.cert.pem"
    ca_file:   "/etc/nginx/ssl/www.ca.pem"
    key_file:  "/etc/nginx/ssl/www.key.pem"
    post_renew_hook: "nginx -s reload"
    hook_timeout: "15s"

  # Postfix + Dovecot mail server
  - domain: "mail.example.com"
    key_type: "RSA2048"
    cert_file: "/etc/ssl/certs/mail.cert.pem"
    ca_file:   "/etc/ssl/certs/mail.ca.pem"
    key_file:  "/etc/ssl/private/mail.key.pem"
    post_renew_hook: |
      systemctl reload postfix
      systemctl reload dovecot
    hook_timeout: "30s"

  # Certificate only — no hook needed
  - domain: "api.example.com"
    key_type: "RSA4096"
    cert_file: "/opt/myapp/tls/cert.pem"
    ca_file:   "/opt/myapp/tls/ca.pem"
    key_file:  "/opt/myapp/tls/key.pem"
